(()=>{"use strict";var e,t,n,i,o,r,a,s,l,d,c,h,u,f,v,g,p,b,m,j,x,w,y,_,O,Z,S,k,C,E,T,P,F,H,R,N,A,I,W,M,B,L,D,X,z,q,U,G={1424:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(352),o=n.n(i)()((function(e){return e[1]}));o.push([e.id,"html {\n  font-size: 62.5%; /* 62.5% of 16px = 10px */\n}\n\nhtml,\nbody,\n#root,\ncanvas {\n  margin: 0px;\n  padding: 0px;\n  width: 100%;\n  height: 100%;\n}\n",""]);const r=o},8548:(e,t,n)=>{var i=n(5701),o=n.n(i),r=n(1424);o()(r.Z,{insert:"head",singleton:!1}),r.Z.locals},1143:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(6939),o=n(9882);const r=["toggleDebugOverlay"],a={bindings:{toggleDebugOverlay:"`"}},s=class{constructor(e){this.config=a,this.scene=e,this.keyToEvent=new Map,Object.entries(this.config.bindings).forEach((([e,t])=>{var n;n=e,r.includes(n)?this.keyToEvent.set(t.toUpperCase(),e):console.warn("Unknown input action:",e)}))}handleKeyEvent(e){if(e.type===i.OG2.KEYDOWN){const t=this.keyToEvent.get(e.event.key.toUpperCase());t&&this.handleAction(t)}}handleAction(e){switch(e){case"toggleDebugOverlay":this.scene.toggleDebugOverlay();break;default:(0,o.UT)(e)}}}},3190:(e,t,n)=>{n.a(e,(async e=>{n.d(t,{Z:()=>a});var i=n(6939);const{build_renderer:o,copy_tiles:r}=await n.e(936).then(n.bind(n,6936)),a=class{constructor(e,t,n){this.mesh=i.VO7.CreateCylinder("tile",{diameter:1,tessellation:6,cap:i.Kj0.CAP_END},e),this.mesh.convertToUnIndexedMesh(),this.mesh.thinInstanceRegisterAttribute("color",4);const a=r(t);this.tiles=a.map(((e,t)=>{const r=o(n).tile_position(e),s=t===a.length-1;return{tile:e,instanceIndex:this.mesh.thinInstanceAdd(i.y3G.Zero(),s),position2d:r}})),this.updateRenderConfig(n)}updateRenderConfig(e){const t=o(e),n=i.y3G.RotationY(Math.PI/4),r=t.tile_side_radius();this.tiles.forEach((({tile:e,instanceIndex:o,position2d:a},s)=>{const l=s===this.tiles.length-1,d=t.tile_height(e),c=i.y3G.Translation(a.x,d,a.y).removeRotationAndScaling().add(n).add(i.y3G.Scaling(r-1,d-1,r-1));this.mesh.thinInstanceSetMatrixAt(o,c,l);const h=t.tile_color(e);this.mesh.thinInstanceSetAttributeAt("color",o,[h.red,h.green,h.blue,1],l)}))}};e()}),1)},2688:(e,t,n)=>{n.a(e,(async e=>{n.d(t,{Z:()=>s}),n(4789),n(810);var i=n(6939),o=n(4522),r=n(9882),a=e([o]);o=(a.then?await a:a)[0];const s=class{constructor(e,t,n){this.engine=new i.D4V(e,!0,{audioEngine:!1},!1);const a=(0,r.Ds)((()=>this.engine.resize()),1e3);window.onresize=()=>{a()},this.scene=new o.Z(this.engine,t,n),this.engine.runRenderLoop((()=>{this.scene.render()}))}updateRenderConfig(e){this.scene.updateRenderConfig(e)}dispose(){this.engine.dispose()}}}))},4522:(e,t,n)=>{n.a(e,(async e=>{n.d(t,{Z:()=>d});var i=n(6939),o=n(3190),r=n(1143),a=n(9882),s=n(9446),l=e([o]);o=(l.then?await l:l)[0];const d=class{constructor(e,t,n){this.scene=function(e){const t=new i.xsS(e);t.clearColor=(0,a.NP)((0,s.Z)().palette.background.default),t.animationsEnabled=!1,t.texturesEnabled=!1,t.proceduralTexturesEnabled=!1,t.collisionsEnabled=!1,t.physicsEnabled=!1,t.fogEnabled=!1,t.particlesEnabled=!1,t.blockMaterialDirtyMechanism=!0;const n=new i.YfP("camera",0,Math.PI/4,200,new i.Pa4(0,100,0),t);return n.lowerRadiusLimit=1,n.upperRadiusLimit=500,n.panningSensibility=100,n.attachControl(e.getRenderingCanvas(),!0),new i.ezm("lightSun",new i.Pa4(0,1,0),t),t}(e),this.renderManager=new o.Z(this.scene,t,n),this.scene.freezeActiveMeshes(),this.inputHandler=new r.Z(this),this.scene.onKeyboardObservable.add((e=>this.inputHandler.handleKeyEvent(e)))}toggleDebugOverlay(){this.scene.debugLayer.isVisible()?this.scene.debugLayer.hide():this.scene.debugLayer.show()}render(){this.scene.render()}updateRenderConfig(e){this.renderManager.updateRenderConfig(e)}}}))},78:(e,t,n)=>{n.a(e,(async e=>{n.d(t,{Z:()=>h});var i=n(7557),o=n(2954),r=n(8789),a=n(565),s=n(3485),l=n(7091),d=n(9446),c=e([s]);s=(c.then?await c:c)[0];const h=()=>(0,i.jsxs)(o.Z,Object.assign({theme:(0,d.Z)()},{children:[(0,i.jsx)(r.ZP,{},void 0),(0,i.jsx)(a.UT,{children:(0,i.jsx)(l.Z,{children:(0,i.jsx)(s.Z,{},void 0)},void 0)},void 0)]}),void 0)}))},3887:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(7557),o=n(9526),r=n(2772),a=n(946),s=n(1478),l=n(9110),d=n(3207);const c=(0,r.Z)((({typography:e})=>({tooltipContent:{fontSize:e.body1.fontSize}}))),h=({id:e,children:t})=>{const n=c(),[r,h]=(0,o.useState)(!1),u=()=>h(!1);return(0,i.jsx)(a.Z,Object.assign({onClickAway:u},{children:(0,i.jsx)(s.ZP,Object.assign({classes:{tooltip:n.tooltipContent},id:e,open:r,title:t,arrow:!0,interactive:!0,disableHoverListener:!0,onClose:u},{children:(0,i.jsx)(l.Z,Object.assign({"aria-label":"help",size:"small",onClick:()=>h((e=>!e))},{children:(0,i.jsx)(d.Z,{},void 0)}),void 0)}),void 0)}),void 0)}},3930:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(7557),o=n(3948),r=n(1530);const a=e=>{const t=Object.assign({component:r.Z},e);return(0,i.jsx)(o.Z,Object.assign({},t),void 0)}},7091:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(7557),o=n(2772),r=n(2248),a=n(5092),s=n(3930);const l=["/demo/world"],d=(0,o.Z)((({breakpoints:e,palette:t,spacing:n})=>({pageLayout:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%"},pageColumn:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"space-between",width:"100%",[e.up("xs")]:{maxWidth:"100%"},[e.up("md")]:{maxWidth:"83%"},[e.up("lg")]:{maxWidth:"67%"},padding:`${n(2)}px ${n(4)}px`,backgroundColor:t.background.default},header:{display:"flex",alignItems:"end",margin:`${n(2)}px 0`,"& > *":{margin:0},"& > :not(:first-child)":{marginLeft:n(2)}},footer:{display:"flex",justifyContent:"center",marginTop:n(2),"& > :not(:first-child)":{marginLeft:n(2)}}}))),c=({children:e})=>{const t=d();return(0,a.$B)(l)?(0,i.jsx)("div",Object.assign({className:t.pageLayout},{children:e}),void 0):(0,i.jsx)("div",Object.assign({className:t.pageLayout},{children:(0,i.jsxs)("div",Object.assign({className:t.pageColumn},{children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("header",Object.assign({className:t.header},{children:[(0,i.jsx)(r.Z,Object.assign({variant:"h1"},{children:"Terra"}),void 0),(0,i.jsx)(r.Z,Object.assign({variant:"subtitle1"},{children:"Terrain Generation System"}),void 0)]}),void 0),e]},void 0),(0,i.jsxs)("footer",Object.assign({className:t.footer},{children:[(0,i.jsxs)(r.Z,Object.assign({variant:"body2"},{children:["Created by"," ",(0,i.jsx)(s.Z,Object.assign({to:"https://lucaspickering.me"},{children:"Lucas Pickering"}),void 0)]}),void 0),(0,i.jsx)(s.Z,Object.assign({to:"https://github.com/LucasPickering/terra-rs"},{children:"GitHub"}),void 0)]}),void 0)]}),void 0)}),void 0)}},1530:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(7557),o=n(9526),r=n(565);const a=o.forwardRef(((e,t)=>{var{to:n,children:o}=e,a=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["to","children"]);const s=n.toString(),l=Boolean(s.match(/^https?:/)),d=Boolean(s.match(/^\/api\//));return l||d?(0,i.jsx)("a",Object.assign({ref:t,href:s},l?{target:"_blank",rel:"noopener noreferrer"}:{},a,{children:o}),void 0):(0,i.jsx)(r.rU,Object.assign({ref:t,to:n},a,{children:o}),void 0)}));a.displayName="UnstyledLink";const s=a},5064:(e,t,n)=>{n.d(t,{Z:()=>w});var i=n(7557),o=n(9526),r=n(2772),a=n(4234),s=n(7142),l=n(1956),d=n(1845),c=n(9490),h=n(4014),u=n(4697),f=n(6270),v=n(7177),g=n(4447),p=n(3574),b=n(8337);const m=()=>{const{renderConfigHandler:e}=(0,o.useContext)(u.Z);return(0,i.jsx)(p.Z,Object.assign({configHandler:e,title:"Configure Render Settings"},{children:(0,i.jsxs)(f.Z,Object.assign({title:"Render Settings",description:b.k.root},{children:[(0,i.jsx)(h.Z,Object.assign({configHandler:e,field:["vertical_scale"],label:"Vertical Scale",description:b.k.vertical_scale},{children:(0,i.jsx)(v.Z,{min:.1,max:5,step:.1},void 0)}),void 0),(0,i.jsx)(h.Z,Object.assign({configHandler:e,field:["tile_lens"],label:"Tile Lens",description:b.k.tile_lens},{children:(0,i.jsxs)(g.Z,{children:[(0,i.jsx)(c.Z,Object.assign({value:"surface"},{children:"Surface"}),void 0),(0,i.jsx)(c.Z,Object.assign({value:"biome"},{children:"Biome"}),void 0),(0,i.jsx)(c.Z,Object.assign({value:"elevation"},{children:"Elevation"}),void 0),(0,i.jsx)(c.Z,Object.assign({value:"humidity"},{children:"Humidity"}),void 0),(0,i.jsx)(c.Z,Object.assign({value:"runoff"},{children:"Runoff"}),void 0)]},void 0)}),void 0)]}),void 0)}),void 0)};var j=n(5129);const x=(0,r.Z)((({spacing:e})=>({configOverlay:{overflowY:"auto"},configOverlayPaper:{padding:`${e(1)}px ${e(4)}px 0 ${e(4)}px`}}))),w=()=>{const e=x(),[t,n]=(0,o.useState)("worldConfig");return(0,i.jsxs)("div",Object.assign({className:e.configOverlay},{children:[(0,i.jsx)(a.Z,Object.assign({position:"sticky"},{children:(0,i.jsxs)(s.Z,Object.assign({value:t,onChange:(e,t)=>n(t)},{children:[(0,i.jsx)(l.Z,{label:"World",value:"worldConfig"},void 0),(0,i.jsx)(l.Z,{label:"Render",value:"renderConfig"},void 0)]}),void 0)}),void 0),(0,i.jsxs)(d.Z,Object.assign({className:e.configOverlayPaper,square:!0},{children:["worldConfig"===t&&(0,i.jsx)(j.Z,{},void 0),"renderConfig"===t&&(0,i.jsx)(m,{},void 0)]}),void 0)]}),void 0)}},3485:(e,t,n)=>{n.a(e,(async e=>{n.d(t,{Z:()=>v});var i=n(7557),o=n(9526),r=n(5092),a=n(6159),s=n(4697),l=n(7909),d=n(5129),c=e([a]);a=(c.then?await c:c)[0];const{generate_world:h,validate_world_config:u,validate_render_config:f}=await n.e(936).then(n.bind(n,6936)),v=()=>{const e=(0,l.y)({validator:u,queryParam:"worldConfig"}),t=(0,l.y)({validator:f,queryParam:"renderConfig"}),[n,c]=(0,o.useState)({phase:"empty"});return(0,i.jsx)(s.Z.Provider,Object.assign({value:{worldConfigHandler:e,renderConfigHandler:t,worldState:n,generateWorld:()=>{c({phase:"generating"}),e.updateQueryParam(),window.requestIdleCallback((()=>{try{const t=h(e.config);c({phase:"populated",world:t})}catch(e){c({phase:"error",error:e})}}))}}},{children:(0,i.jsxs)(r.rs,{children:[(0,i.jsx)(r.AW,Object.assign({path:"/demo/new",exact:!0},{children:(0,i.jsx)(d.Z,{standalone:!0},void 0)}),void 0),(0,i.jsx)(r.AW,Object.assign({path:"/demo/world",exact:!0},{children:(0,i.jsx)(a.Z,{},void 0)}),void 0),(0,i.jsx)(r.l_,{from:"*",to:"/demo/new",exact:!0},void 0)]},void 0)}),void 0)};e()}),1)},7363:(e,t,n)=>{n.a(e,(async e=>{n.d(t,{Z:()=>c});var i=n(7557),o=n(9526),r=n(8374),a=n(5255),s=n(9490),l=n(4697);const{build_renderer:d}=await n.e(936).then(n.bind(n,6936)),c=e=>{const{worldState:t,renderConfigHandler:n}=(0,o.useContext)(l.Z);if("populated"!==t.phase)return null;const{world:c}=t;return(0,i.jsxs)(a.Z,Object.assign({},e,{children:[(0,i.jsx)(s.Z,Object.assign({onClick:()=>{const e=c.to_json();(0,r.saveAs)(new Blob([e],{type:"application/json"}),"terra.json")}},{children:"Download as JSON"}),void 0),(0,i.jsx)(s.Z,Object.assign({onClick:()=>{const e=c.to_bin();(0,r.saveAs)(new Blob([e],{type:"application/octet-stream"}),"terra.bin")}},{children:"Download as BIN"}),void 0),(0,i.jsx)(s.Z,Object.assign({onClick:()=>{const e=d(n.config).render_as_svg(c);(0,r.saveAs)(new Blob([e],{type:"image/svg+xml"}),"terra.svg")}},{children:"Download as SVG"}),void 0),(0,i.jsx)(s.Z,Object.assign({onClick:()=>{const e=d(n.config).render_as_stl(c);(0,r.saveAs)(new Blob([e],{type:"model/stl"}),"terra.stl")}},{children:"Download as STL"}),void 0)]}),void 0)};e()}),1)},5082:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(7557),o=n(2248),r=n(3930);const a=()=>(0,i.jsxs)("div",{children:[(0,i.jsx)(o.Z,Object.assign({variant:"h3"},{children:"An error occurred during world generation: ("}),void 0),(0,i.jsxs)(o.Z,Object.assign({component:"div"},{children:["Please"," ",(0,i.jsx)(r.Z,Object.assign({to:"https://github.com/LucasPickering/terra-rs/issues/new"},{children:"file an issue"}),void 0)," ","for this and ",(0,i.jsx)("strong",{children:"include the following:"},void 0),(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:"e world generation config JSON (available in the config editor panel on this page)"},void 0),(0,i.jsx)("li",{children:"The error from the browser developer console"},void 0)]},void 0)]}),void 0)]},void 0)},1164:(e,t,n)=>{n.a(e,(async e=>{n.d(t,{Z:()=>f});var i=n(7557),o=n(9526),r=n(2688),a=n(2772),s=n(3167),l=n(4697),d=n(8157),c=n(5082),h=e([r]);r=(h.then?await h:h)[0];const u=(0,a.Z)((()=>({content:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}}))),f=()=>{const{renderConfigHandler:e,worldState:t,generateWorld:n}=(0,o.useContext)(l.Z),a=u(),h=(0,o.useRef)(null),f=(0,o.useRef)(),v=t.phase;(0,o.useEffect)((()=>{"empty"===v&&n()}),[v]),(0,o.useEffect)((()=>{"populated"!==t.phase&&f.current&&(f.current.dispose(),f.current=void 0),h.current&&"populated"===t.phase&&(f.current&&f.current.dispose(),f.current=new r.Z(h.current,t.world,e.config))}),[e,t]);const g=(0,d.Z)(e.config,500),{updateQueryParam:p}=e;return(0,o.useEffect)((()=>{var e;null===(e=f.current)||void 0===e||e.updateRenderConfig(g),p()}),[g,f,p]),"generating"===t.phase?(0,i.jsx)("div",Object.assign({className:a.content},{children:(0,i.jsx)(s.Z,{size:"10rem"},void 0)}),void 0):"error"===t.phase?(0,i.jsx)("div",Object.assign({className:a.content},{children:(0,i.jsx)(c.Z,{},void 0)}),void 0):(0,i.jsx)("canvas",{ref:h},void 0)}}))},6159:(e,t,n)=>{n.a(e,(async e=>{n.d(t,{Z:()=>m});var i=n(7557),o=n(9526),r=n(2772),a=n(9110),s=n(4354),l=n(8716),d=n(4561),c=n(816),h=n(7363),u=n(1530),f=n(5064),v=n(1164),g=n(4697),p=e([v,h]);[v,h]=p.then?await p:p;const b=(0,r.Z)((({spacing:e})=>({loading:{margin:"auto 0"},canvasWrapper:{position:"relative",width:"100%",height:"100%",overflow:"hidden"},canvasOverlay:{position:"absolute",display:"flex",flexDirection:"column",width:"40%",maxWidth:600,maxHeight:"100%",padding:e(1),paddingRight:0},buttons:{marginBottom:e(1)}}))),m=()=>{const e=b(),t=(0,o.useRef)(null),[n,r]=(0,o.useState)(!1),[p,m]=(0,o.useState)(!1),{worldState:j}=(0,o.useContext)(g.Z);return(0,i.jsxs)("div",Object.assign({className:e.canvasWrapper},{children:[(0,i.jsxs)("div",Object.assign({className:e.canvasOverlay},{children:[(0,i.jsxs)("div",Object.assign({className:e.buttons},{children:[(0,i.jsx)(a.Z,Object.assign({"aria-label":"back to config",component:u.Z,to:e=>Object.assign(Object.assign({},e),{pathname:"/demo/new"})},{children:(0,i.jsx)(s.Z,{},void 0)}),void 0),(0,i.jsx)(a.Z,Object.assign({ref:t,"aria-controls":"download-menu","aria-haspopup":"true",disabled:"populated"!==j.phase,onClick:()=>m(!0)},{children:(0,i.jsx)(l.Z,{},void 0)}),void 0),(0,i.jsx)(h.Z,{id:"download-menu",anchorEl:t.current,open:"populated"===j.phase&&p,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},onClose:()=>m(!1)},void 0),(0,i.jsx)(a.Z,Object.assign({"aria-label":n?"close config":"edit config",onClick:()=>r((e=>!e))},{children:n?(0,i.jsx)(d.Z,{},void 0):(0,i.jsx)(c.Z,{},void 0)}),void 0)]}),void 0),n&&(0,i.jsx)(f.Z,{},void 0)]}),void 0),(0,i.jsx)(v.Z,{},void 0)]}),void 0)}}))},3574:(e,t,n)=>{n.d(t,{Z:()=>f});var i=n(7557),o=n(9526),r=n(1459),a=n(2248),s=n(5898),l=n(2772),d=n(1686);const c=(0,l.Z)((()=>({saveButton:{width:"100%"},textField:{width:"100%",height:"100%"}})));function h(e){return JSON.stringify(e,null,4)}const u=function({configHandler:e}){const t=c(),[n,r]=(0,o.useState)((()=>h(e.config))),[a,l]=(0,o.useState)(void 0);(0,o.useEffect)((()=>{r(h(e.config))}),[e.config]),(0,o.useEffect)((()=>{l(void 0)}),[n]);const u=Boolean(a),f=(0,o.useMemo)((()=>n===h(e.config)),[n,e.config]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Z,Object.assign({className:t.saveButton,disabled:f||u,color:"primary",variant:"contained",onClick:()=>(()=>{try{e.setFromJson(n)}catch(e){l(e)}})()},{children:"Save"}),void 0),(0,i.jsx)(d.Z,{className:t.textField,error:u,variant:"outlined",helperText:null==a?void 0:a.toString(),multiline:!0,value:n,onChange:e=>r(e.target.value)},void 0)]},void 0)},f=function({configHandler:e,title:t,onSubmit:n,submitButton:l,children:d}){const[c,h]=(0,o.useState)(!1);return(0,i.jsx)("form",Object.assign({onSubmit:e=>{e.preventDefault(),n&&n()}},{children:(0,i.jsxs)(r.Z,Object.assign({container:!0,spacing:4},{children:[(0,i.jsx)(r.Z,Object.assign({item:!0,xs:12},{children:(0,i.jsx)(a.Z,Object.assign({variant:"h2"},{children:t}),void 0)}),void 0),(0,i.jsxs)(r.Z,Object.assign({item:!0,xs:12,container:!0,spacing:1,justify:"flex-end"},{children:[(0,i.jsx)(r.Z,Object.assign({item:!0,xs:6},{children:(0,i.jsx)(s.Z,Object.assign({fullWidth:!0,variant:"outlined",onClick:()=>e.reset(!0)},{children:"Reset to Default"}),void 0)}),void 0),(0,i.jsx)(r.Z,Object.assign({item:!0,xs:6},{children:(0,i.jsx)(s.Z,Object.assign({fullWidth:!0,variant:"outlined",onClick:()=>h((e=>!e))},{children:"Edit as JSON"}),void 0)}),void 0),l&&(0,i.jsx)(r.Z,Object.assign({item:!0,xs:12},{children:l}),void 0)]}),void 0),c?(0,i.jsx)(r.Z,Object.assign({item:!0,xs:12,container:!0,spacing:1},{children:(0,i.jsx)(u,{configHandler:e},void 0)}),void 0):d]}),void 0)}),void 0)}},4014:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(7557),o=n(9526),r=n(2772),a=n(9882),s=n(3887);const l=(0,r.Z)((({spacing:e})=>({configInputWrapper:{marginTop:e(1)}}))),d=function({configHandler:e,field:t,label:n,description:r,children:d}){const c=l(),h=`input-${t}`,u=`tooltip-${t}`,f=(0,a.U2)(e.config,t);return(0,i.jsxs)("div",Object.assign({className:c.configInputWrapper},{children:[(0,i.jsxs)("label",Object.assign({htmlFor:h,"aria-describedby":u},{children:[n,(0,i.jsx)(s.Z,Object.assign({id:u},{children:r}),void 0)]}),void 0),o.cloneElement(d,{id:h,value:f,onChange:n=>{e.setField(t,n)}})]}),void 0)}},6270:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(7557),o=n(2772),r=n(1459),a=n(2248),s=n(3887);const l=(0,o.Z)((({spacing:e})=>({configSection:{display:"flex",flexDirection:"column",width:"100%"},titleWrapper:{display:"flex",alignItems:"center",width:"100%"},titleText:{marginRight:e(1)}}))),d=e=>{var{title:t,description:n,children:o}=e,d=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["title","description","children"]);const c=l();return(0,i.jsx)(r.Z,Object.assign({item:!0,xs:12},{children:(0,i.jsxs)("section",Object.assign({className:c.configSection},d,{children:[(0,i.jsxs)("div",Object.assign({className:c.titleWrapper},{children:[(0,i.jsx)(a.Z,Object.assign({className:c.titleText,variant:"h3"},{children:t}),void 0),(0,i.jsx)(s.Z,{children:n},void 0)]}),void 0),o]}),void 0)}),void 0)}},7177:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(7557),o=n(9975);const r=e=>{var{value:t,min:n=0,max:r=10,markValues:a,step:s,formatMark:l=(e=>e.toString()),onChange:d}=e,c=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["value","min","max","markValues","step","formatMark","onChange"]);let h;if(a)h=a.map((e=>({value:e})));else{h=[{value:n}];const e=null!=s?s:1;for(let t=n+e;t<r;t+=e)h.push({value:t});h.push({value:r})}return h[0].label=l(h[0].value),h[h.length-1].label=l(h[h.length-1].value),(0,i.jsx)(o.Z,Object.assign({value:t,min:n,max:r,step:s,marks:h,color:"primary",valueLabelDisplay:"auto",onChange:d&&((e,t)=>d(Array.isArray(t)?t[0]:t))},c),void 0)}},4447:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(7557),o=n(2772),r=n(9459);const a=(0,o.Z)({selectConfigInput:{display:"flex"}}),s=e=>{var{value:t,onChange:n,children:o}=e,s=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["value","onChange","children"]);const l=a();return(0,i.jsx)(r.Z,Object.assign({className:l.selectConfigInput,value:t,color:"primary",onChange:n&&(e=>n(e.target.value))},s,{children:o}),void 0)}},5129:(e,t,n)=>{n.d(t,{Z:()=>O});var i=n(7557),o=n(9526),r=n(5898),a=n(9490),s=n(4014),l=n(4697),d=n(6270),c=n(7177),h=n(4447),u=n(2772),f=n(1686);const v=(0,u.Z)((()=>({textField:{width:"100%"}}))),g=e=>{var{value:t,onChange:n}=e,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["value","onChange"]);const r=v();return(0,i.jsx)(f.Z,Object.assign({className:r.textField,color:"primary",variant:"outlined",size:"small",value:t,onChange:n&&(e=>n(e.target.value))},o),void 0)};var p=n(8337),b=n(3574),m=n(9882),j=n(5092),x=n(7445);const w=e=>{var{value:t,onChange:n}=e,o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(e,["value","onChange"]);return(0,i.jsx)("div",{children:(0,i.jsx)(x.Z,Object.assign({color:"primary",checked:t,onChange:n&&(e=>n(e.target.checked))},o),void 0)},void 0)},y={min:0,max:1,step:.05},_={min:0,max:3,step:.1},O=({standalone:e=!1})=>{const t=(0,j.TH)(),{worldConfigHandler:n,worldState:u,generateWorld:f}=(0,o.useContext)(l.Z);return e&&"empty"!==u.phase?(0,i.jsx)(j.l_,{to:Object.assign(Object.assign({},t),{pathname:"/demo/world"})},void 0):(0,i.jsxs)(b.Z,Object.assign({configHandler:n,title:"Configure World Generation",onSubmit:()=>f(),submitButton:(0,i.jsx)(r.Z,Object.assign({disabled:"generating"===u.phase,fullWidth:!0,type:"submit",color:"primary",variant:"contained"},{children:e?"Generate World":"Regenerate World"}),void 0)},{children:[(0,i.jsxs)(d.Z,Object.assign({title:"General",description:"General world settings"},{children:[(0,i.jsx)(s.Z,Object.assign({configHandler:n,field:["seed"],label:"Random Seed",description:p.X.general.seed},{children:(0,i.jsx)(g,{},void 0)}),void 0),(0,i.jsx)(s.Z,Object.assign({configHandler:n,field:["radius"],label:"World Radius",description:p.X.general.radius},{children:(0,i.jsx)(c.Z,{min:0,max:500,step:10},void 0)}),void 0)]}),void 0),(0,i.jsxs)(d.Z,Object.assign({title:"Edge Buffer",description:p.X.edge_buffer.root},{children:[(0,i.jsx)(s.Z,Object.assign({configHandler:n,field:["elevation","edge_buffer_fraction"],label:"Edge Buffer Fraction",description:p.X.edge_buffer.edge_buffer_fraction},{children:(0,i.jsx)(c.Z,Object.assign({},y),void 0)}),void 0),(0,i.jsx)(s.Z,Object.assign({configHandler:n,field:["elevation","edge_buffer_exponent"],label:"Edge Buffer Exponent",description:p.X.edge_buffer.edge_buffer_exponent},{children:(0,i.jsx)(c.Z,Object.assign({},_),void 0)}),void 0)]}),void 0),(0,i.jsxs)(d.Z,Object.assign({title:"Elevation",description:p.X.elevation.root},{children:[(0,i.jsx)(s.Z,Object.assign({configHandler:n,field:["elevation","noise_fn","noise_type"],label:"Noise Type",description:p.X.elevation.noise_type},{children:(0,i.jsxs)(h.Z,{children:[(0,i.jsx)(a.Z,Object.assign({value:"basic_multi"},{children:"Basic Multi"}),void 0),(0,i.jsx)(a.Z,Object.assign({value:"billow"},{children:"Billow"}),void 0),(0,i.jsx)(a.Z,Object.assign({value:"fbm"},{children:"Fractal Brownian Motion"}),void 0),(0,i.jsx)(a.Z,Object.assign({value:"hybrid_multi"},{children:"Hybrid Multi"}),void 0),(0,i.jsx)(a.Z,Object.assign({value:"ridged_multi"},{children:"Ridged Multi"}),void 0)]},void 0)}),void 0),(0,i.jsx)(s.Z,Object.assign({configHandler:n,field:["elevation","noise_fn","octaves"],label:"Octaves",description:p.X.elevation.octaves},{children:(0,i.jsx)(c.Z,{min:1,max:10},void 0)}),void 0),(0,i.jsx)(s.Z,Object.assign({configHandler:n,field:["elevation","noise_fn","frequency"],label:"Frequency",description:p.X.elevation.frequency},{children:(0,i.jsx)(c.Z,{min:.1,max:5,step:.1},void 0)}),void 0),(0,i.jsx)(s.Z,Object.assign({configHandler:n,field:["elevation","noise_fn","lacunarity"],label:"Lacunarity",description:p.X.elevation.lacunarity},{children:(0,i.jsx)(c.Z,{min:.5,max:10,step:.5},void 0)}),void 0),(0,i.jsx)(s.Z,Object.assign({configHandler:n,field:["elevation","noise_fn","persistence"],label:"Persistence",description:p.X.elevation.persistence},{children:(0,i.jsx)(c.Z,{min:0,max:2,step:.1},void 0)}),void 0),(0,i.jsx)(s.Z,Object.assign({configHandler:n,field:["elevation","noise_fn","exponent"],label:"Exponent",description:p.X.elevation.exponent},{children:(0,i.jsx)(c.Z,Object.assign({},_),void 0)}),void 0)]}),void 0),(0,i.jsxs)(d.Z,Object.assign({title:"Rainfall",description:p.X.rainfall.root},{children:[(0,i.jsx)(s.Z,Object.assign({configHandler:n,field:["rainfall","enabled"],label:"Enabled?",description:p.X.rainfall.enabled},{children:(0,i.jsx)(w,{},void 0)}),void 0),(0,i.jsx)(s.Z,Object.assign({configHandler:n,field:["rainfall","evaporation_default"],label:"Default Evaporation Volume",description:p.X.rainfall.evaporation_default},{children:(0,i.jsx)(c.Z,{min:0,max:10,step:.5,formatMark:m.TB},void 0)}),void 0),(0,i.jsx)(s.Z,Object.assign({configHandler:n,field:["rainfall","evaporation_land_scale"],label:"Land Evaporation Scale",description:p.X.rainfall.evaporation_land_scale},{children:(0,i.jsx)(c.Z,Object.assign({},y),void 0)}),void 0),(0,i.jsx)(s.Z,Object.assign({configHandler:n,field:["rainfall","evaporation_spread_distance"],label:"Evaporation Spread Distance",description:p.X.rainfall.evaporation_spread_distance},{children:(0,i.jsx)(c.Z,{min:0,max:100,step:5},void 0)}),void 0),(0,i.jsx)(s.Z,Object.assign({configHandler:n,field:["rainfall","evaporation_spread_exponent"],label:"Evaporation Spread Exponent",description:p.X.rainfall.evaporation_spread_exponent},{children:(0,i.jsx)(c.Z,Object.assign({},_),void 0)}),void 0),(0,i.jsx)(s.Z,Object.assign({configHandler:n,field:["rainfall","rainfall_fraction_limit"],label:"Rainfall Fraction Limit",description:p.X.rainfall.rainfall_fraction_limit},{children:(0,i.jsx)(c.Z,{min:0,max:.5,step:.05},void 0)}),void 0)]}),void 0),(0,i.jsxs)(d.Z,Object.assign({title:"Geographic Features",description:p.X.geo_feature.root},{children:[(0,i.jsx)(s.Z,Object.assign({configHandler:n,field:["geo_feature","lake_runoff_threshold"],label:"Lake Runoff Threshold",description:p.X.geo_feature.lake_runoff_threshold},{children:(0,i.jsx)(c.Z,{min:0,max:20,step:1,formatMark:m.TB},void 0)}),void 0),(0,i.jsx)(s.Z,Object.assign({configHandler:n,field:["geo_feature","river_runoff_traversed_threshold"],label:"River Runoff-Traversed Threshold",description:p.X.geo_feature.river_runoff_traversed_threshold},{children:(0,i.jsx)(c.Z,{min:0,max:1e3,step:50,formatMark:m.TB},void 0)}),void 0)]}),void 0)]}),void 0)}},8337:(e,t,n)=>{n.d(t,{X:()=>r,k:()=>a});var i=n(7557),o=n(3930);const r={general:{root:"",seed:(0,i.jsxs)(i.Fragment,{children:["Seed used for all random number generation. See"," ",(0,i.jsx)(o.Z,Object.assign({to:"https://en.wikipedia.org/wiki/Pseudorandom_number_generator"},{children:"pseudorandom number generation"}),void 0),". You can enter any text here, and it will be converted to a seed value."]},void 0),radius:(0,i.jsx)(i.Fragment,{children:"The size of the world, as a distance from the center to the edge. A radius of 0 means the world is just 1 tile."},void 0)},edge_buffer:{root:(0,i.jsx)(i.Fragment,{children:"The edge buffer is an area around the edge of the map where elevations are suppresed in order to guarantee that the edge is entirely ocean, so that no land mass gets cut off. You can imagine the edge buffer as a ring of tiles around the edge of the map that slopes down from its inner edge to its outer edge."},void 0),edge_buffer_fraction:(0,i.jsx)(i.Fragment,{children:"The fraction of the map that constitutes the edge buffer. 0.1 means the outer 10%, 0.2 is the outer 20%, etc. Set to 0 to disable the edge buffer."},void 0),edge_buffer_exponent:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("p",{children:["The exponent applied to the edge buffer scaling function."," ",(0,i.jsx)("code",{children:"e=1.0"},void 0)," means the edge buffer will generally be a linear descent from the inner edge of the buffer to the outer edge."]},void 0),(0,i.jsxs)("p",{children:[(0,i.jsx)("code",{children:"e<1.0"},void 0)," means the gradient will be more gradual towards the inside and more aggressive at the end."]},void 0),(0,i.jsxs)("p",{children:[(0,i.jsx)("code",{children:"e>1.0"},void 0)," mean the gradient will be steepest at the inner edge and will level out towards the outer edge."]},void 0)]},void 0)},elevation:{root:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("p",{children:["Tile elevations are generated via a"," ",(0,i.jsx)(o.Z,Object.assign({to:"https://en.wikipedia.org/wiki/Perlin_noise"},{children:"Perlin noise function"}),void 0),'. The function is a composite of multiple "octaves", where each octave is a cyclic function with a set frequency. The resulting function is the sum of each octave.']},void 0),(0,i.jsx)("p",{children:"These settings control the behavior of the base function (the lowest octave), and how subsequent octaves are derived from there. We also apply post-process each elevation by applying an exponent to the output values of the noise function. In math terms, the elevation function looks something like:"},void 0),(0,i.jsx)("p",{children:(0,i.jsxs)("code",{children:["Elev(x, y) = P",(0,i.jsx)("sub",{children:"o,f,l,p"},void 0),"(x, y)",(0,i.jsx)("sup",{children:"exp"},void 0)]},void 0)},void 0)]},void 0),noise_type:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{children:"The type of noise function used to generate elevation values. See associated links for a description of each function type."},void 0),(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:(0,i.jsx)(o.Z,Object.assign({to:"https://docs.rs/noise/0.7.0/noise/struct.BasicMulti.html"},{children:"Basic Multi"}),void 0)},void 0),(0,i.jsx)("li",{children:(0,i.jsx)(o.Z,Object.assign({to:"https://docs.rs/noise/0.7.0/noise/struct.Billow.html"},{children:"Billow"}),void 0)},void 0),(0,i.jsx)("li",{children:(0,i.jsx)(o.Z,Object.assign({to:"https://docs.rs/noise/0.7.0/noise/struct.Fbm.html"},{children:"Fractal Brownian Motion"}),void 0)},void 0),(0,i.jsx)("li",{children:(0,i.jsx)(o.Z,Object.assign({to:"https://docs.rs/noise/0.7.0/noise/struct.HybridMulti.html"},{children:"Hybrid Multi"}),void 0)},void 0),(0,i.jsx)("li",{children:(0,i.jsx)(o.Z,Object.assign({to:"https://docs.rs/noise/0.7.0/noise/struct.RidgedMulti.html"},{children:"Ridged Multi"}),void 0)},void 0)]},void 0)]},void 0),octaves:(0,i.jsx)(i.Fragment,{children:"The number of octaves in the noise function. Fewer octaves tends to give more varied results but appears very artificial. Add more octaves to make more realistic-looking terrain."},void 0),frequency:(0,i.jsx)(i.Fragment,{children:"The frequency of the lowest octave. Lower frequencies will give smoother terrain, where peaks are further apart. Higher frequencies give more jagged terrain."},void 0),lacunarity:(0,i.jsxs)(i.Fragment,{children:["The difference in frequency between one octave and the next. E.g. with"," ",(0,i.jsx)("code",{children:"l=2.0"},void 0)," if the lowest octave has ",(0,i.jsx)("code",{children:"f=1.0"},void 0),", then the next two octaves will be ",(0,i.jsx)("code",{children:"f=3.0"},void 0)," and ",(0,i.jsx)("code",{children:"f=5.0"},void 0),"."]},void 0),persistence:(0,i.jsxs)(i.Fragment,{children:["The ratio of amplitude between one octave and the next. With"," ",(0,i.jsx)("code",{children:"p=1.0"},void 0),", all octaves will have the same amplitude. With"," ",(0,i.jsx)("code",{children:"p<1.0"},void 0),", the amplitude will diminish from one octave to the next, which is typically what you want. With ",(0,i.jsx)("code",{children:"p>1.0"},void 0),", the amplitude will increase from one octave to the next, which is rather weird but I won't stop you."]},void 0),exponent:(0,i.jsxs)(i.Fragment,{children:["The exponent of the polynomial post-processing function on each elevation. With ",(0,i.jsx)("code",{children:"exp=1.0"},void 0),", each elevation will simply be the output of the noise function. With ",(0,i.jsx)("code",{children:"e>1.0"},void 0),", elevations will generally be pushed down with the steepest suppression on the highest tiles. With ",(0,i.jsx)("code",{children:"e<1.0"},void 0),", elevations will generally be elevated, again with the biggest difference occuring on the highest tiles."]},void 0)},rainfall:{root:(0,i.jsxs)(i.Fragment,{children:["Terra simulates rainfall on each tile in order to determine how humid each tile is (which affects its biome) and how much runoff originates on that tile, which is used to form rivers and lakes. The algorithm for rainfall simulation is roughly:",(0,i.jsxs)("ol",{children:[(0,i.jsx)("li",{children:"Pick a prevailing wind direction, which is uniform over the entire world."},void 0),(0,i.jsx)("li",{children:'Initialize a "cloud line", which starts at the most upwind point tiles in the world and spans the width of the entire world. The cloud line will be perpendicular to the prevailing wind direction.'},void 0),(0,i.jsx)("li",{children:"For each tile in the cloud line, accumulate some amount of evaporation from nearby tiles that are directly under the clouds."},void 0),(0,i.jsx)("li",{children:"For each tile in the cloud line, drop some fraction of that cloud tile's accumulated evaporation onto the tile directly below."},void 0),(0,i.jsx)("li",{children:"Push the cloud line downwind one tile and repeat."},void 0)]},void 0)]},void 0),enabled:(0,i.jsx)(i.Fragment,{children:"Enable or disable rainfall and runoff simulation. This part of world generation is expensive, so disable it if you don't need it for a significant improvement in performance."},void 0),evaporation_default:(0,i.jsx)(i.Fragment,{children:"The amount of evaporation (in m³) that an ocean tile provides to the cloud directly above it."},void 0),evaporation_land_scale:(0,i.jsx)(i.Fragment,{children:"The amount of evaporation that a land tile provides to the cloud directly above it, as a fraction of the default evaporation value. E.g. if the default value is 10 m³ and the land scale is 0.1, then each land tile will provide 1 m³ to their nearest friendly neighborhood cloud."},void 0),evaporation_spread_distance:(0,i.jsx)(i.Fragment,{children:"The distance (in tiles) that evaporation spreads, perpendicular to the wind. E.g. if we consider the wind direction to be *forward*, then this is the distance to the left and right that a particular tile's evaporation will spread. This is a smoothing mechanism that makes precipitation patterns appear smoother/more natural."},void 0),evaporation_spread_exponent:(0,i.jsxs)(i.Fragment,{children:["Exponent to apply while calculating spread diminishment. If the exponent is 1.0, then evaporation spread will be linear, meaning the amount of evaporation that one tile will receive from another tile that is"," ",(0,i.jsx)("code",{children:"n"},void 0)," steps away will be proportional to ",(0,i.jsx)("code",{children:"n"},void 0),". If this is ",(0,i.jsx)("code",{children:"<1"},void 0),", then spreading will be biased towards the center, and if ",(0,i.jsx)("code",{children:">1"},void 0)," will be biased towards the outer edges."]},void 0),rainfall_fraction_limit:(0,i.jsx)(i.Fragment,{children:"The maximum fraction of a cloud's rainfall that can be dropped on any particular tile. E.g. if this is 0.01, then a cloud can drop at most 1% of its held water on a single tile. This value should typically be pretty small, to allow water to spread over huge tracts of land."},void 0)},geo_feature:{root:(0,i.jsx)(i.Fragment,{children:"Geographic features are features generated on tiles as a result of prior generated attributes. For example, we generate lakes based on accumulated runoff, and rivers based on total traversed runoff."},void 0),lake_runoff_threshold:(0,i.jsx)(i.Fragment,{children:"The amount of runoff needed to accumulate on a tile (in m³) for it to become a lake."},void 0),river_runoff_traversed_threshold:(0,i.jsxs)(i.Fragment,{children:["The amount of runoff needed to ",(0,i.jsx)("em",{children:"pass over"},void 0)," a tile for it to become a river. Unlike lakes, where we just look at accumumlated runoff, for rivers we look at all the runoff that flows over a tile. As such, this threshold should be a lot higher than the lake threshold."]},void 0)}},a={root:(0,i.jsxs)(i.Fragment,{children:["Render options are strictly limited to controlling how a Terra world is visually rendered."," ",(0,i.jsx)("strong",{children:"They have no impact on world generation."},void 0)," These options serve two purposes. First, they instruct Terra itself how to render tiles, and second they serve as a reference to external renderers for how to render the world. For example, a Terra world can be rendered by a 3rd party application, and that application could choose whatever factor of Y-scaling that it wants. But it is ",(0,i.jsx)("em",{children:"suggested"},void 0)," to use the Y scale value from this config, for consistency."]},void 0),vertical_scale:(0,i.jsxs)(i.Fragment,{children:["Visual vertical scaling factor for each individual tile. At 1.0, 1 meter of elevation will be visually equivalent to the length of one side of a tile. Note that, because this is a render option, this has no impact on the elevation values generated for a world."," ",(0,i.jsx)("strong",{children:"It solely impacts how those elevations are converted to visual units during rendering."},void 0)]},void 0),tile_lens:(0,i.jsx)(i.Fragment,{children:'Tile lens controls which characteristics of each tile gets shown. For example, the "biome" lens means that each tile\'s color is based on its biome.'},void 0)}},4697:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n(9526).createContext({})},7909:(e,t,n)=>{n.d(t,{y:()=>a});var i=n(9526),o=n(5092),r=n(9882);function a({validator:e,queryParam:t}){const n=(0,o.k6)(),{params:a}=(()=>{const e=(0,o.k6)(),t=e.location.search,n=(0,i.useMemo)((()=>new URLSearchParams(t)),[t]),r=(0,i.useCallback)((t=>{Object.entries(t).forEach((([e,t])=>{n.set(e,JSON.stringify(t))})),e.replace(Object.assign(Object.assign({},e.location),{search:n.toString()}))}),[e,n]);return{params:n,update:r}})(),[s,l]=(0,i.useState)((()=>{if(t){const n=a.get(t);if(n)try{const t=JSON.parse(window.atob(n));return e(t)}catch(e){console.warn("Error parsing config from query params:",e)}}return e({})})),d=t=>{const n=JSON.parse(t);return e(n)};return{config:s,setField:(e,t)=>{const n=Object.assign({},s);(0,r.t8)(n,e,t),l(n)},reset:t=>{t&&!window.confirm("Are you sure? You will lose all your current settings.")||l(e({}))},setFromJson:e=>{l(d(e))},validate:d,updateQueryParam:()=>{if(!t)throw new Error("Cannot update URL: No query param set for this config");const e=new URLSearchParams(n.location.search),i=window.btoa(JSON.stringify(s));e.set(t,i);const o=e.toString();n.replace(Object.assign(Object.assign({},n.location),{search:o}))}}}},8157:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(9526);const o=(e,t)=>{const[n,o]=(0,i.useState)(e),r=(0,i.useRef)();return(0,i.useEffect)((()=>{void 0!==r.current&&window.clearTimeout(r.current),r.current=window.setTimeout((()=>{o(e)}),t)}),[e,t]),n}},2629:(e,t,n)=>{n.a(e,(async e=>{var t=n(7557),i=n(9526),o=n(3961),r=n(78),a=(n(8548),e([r]));r=(a.then?await a:a)[0],o.render((0,t.jsx)(i.StrictMode,{children:(0,t.jsx)(r.Z,{},void 0)},void 0),document.getElementById("root"))}))},9446:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(8632),o=n(2360);const r=function(){const e=(0,i.Z)((0,o.Z)({palette:{type:"dark",primary:{light:"#99d066",main:"#689f38",dark:"#387002"},secondary:{light:"#5778d5",main:"#144da3",dark:"#002673"},background:{default:"#4a3424",paper:"#775e4c"}},typography:{htmlFontSize:10,fontFamily:"sans-serif",h1:{fontSize:"3.2rem",margin:"1rem 0"},h2:{fontSize:"2.8rem",margin:"1rem 0"},h3:{fontSize:"2.4rem",margin:"0.875rem 0"},h4:{fontSize:"2.0rem"},h5:{fontSize:"1.6rem"},h6:{fontSize:"1.2rem"},body1:{margin:"1rem 0"},button:{textTransform:"none"}}}));return e.overrides={MuiTooltip:{tooltip:{backgroundColor:e.palette.background.paper,"& a":{color:e.palette.primary.light},"& ol":{paddingLeft:e.spacing(4)}},arrow:{color:e.palette.background.paper}}},e}},9882:(e,t,n)=>{n.d(t,{U2:()=>o,t8:()=>r,UT:()=>a,NP:()=>s,Ds:()=>l,TB:()=>d});var i=n(6939);function o(e,t){if(0===t.length)throw new Error("Cannot get value for empty path");const n=t[0];return 1===t.length?e[n]:o(e[n],t.slice(1))}function r(e,t,n){if(0===t.length)throw new Error("Cannot set value for empty key");const i=t[0];1===t.length?e[i]=n:r(e[i],t.slice(1),n)}function a(e){throw new Error("Didn't expect to get here")}function s(e){const t=e.match(/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/);if(!t)throw new Error(`Invalid hex code: ${e}`);const[,n,o,r]=t;return new i.HEv(parseInt(n,16)/255,parseInt(o,16)/255,parseInt(r,16)/255,1)}function l(e,t){const n={id:void 0};return()=>{void 0!==n.id&&window.clearTimeout(n.id),n.id=window.setTimeout(e,t)}}function d(e){return`${e} m³`}}},$={};function V(e){var t=$[e];if(void 0!==t)return t.exports;var n=$[e]={id:e,loaded:!1,exports:{}};return G[e].call(n.exports,n,n.exports,V),n.loaded=!0,n.exports}V.m=G,V.c=$,e="function"==typeof Symbol?Symbol("webpack then"):"__webpack_then__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n=e=>{e&&(e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},i=e=>!--e.r&&e(),o=(e,t)=>e?e.push(t):i(t),V.a=(r,a,s)=>{var l,d,c,h=s&&[],u=r.exports,f=!0,v=!1,g=(t,n,i)=>{v||(v=!0,n.r+=t.length,t.map(((t,o)=>t[e](n,i))),v=!1)},p=new Promise(((e,t)=>{c=t,d=()=>(e(u),n(h),h=0)}));p[t]=u,p[e]=(e,t)=>{if(f)return i(e);l&&g(l,e,t),o(h,e),p.catch(t)},r.exports=p,a((r=>{if(!r)return d();var a,s;l=(r=>r.map((r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var a=[];r.then((e=>{s[t]=e,n(a),a=0}));var s={[e]:(e,t)=>(o(a,e),r.catch(t))};return s}}return{[e]:e=>i(e),[t]:r}})))(r);var c=new Promise(((e,n)=>{(a=()=>e(s=l.map((e=>e[t])))).r=0,g(l,a,n)}));return a.r?c:s})).then(d,c),f=!1},r=[],V.O=(e,t,n,i)=>{if(!t){var o=1/0;for(l=0;l<r.length;l++){for(var[t,n,i]=r[l],a=!0,s=0;s<t.length;s++)(!1&i||o>=i)&&Object.keys(V.O).every((e=>V.O[e](t[s])))?t.splice(s--,1):(a=!1,i<o&&(o=i));a&&(r.splice(l--,1),e=n())}return e}i=i||0;for(var l=r.length;l>0&&r[l-1][2]>i;l--)r[l]=r[l-1];r[l]=[t,n,i]},V.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return V.d(t,{a:t}),t},V.d=(e,t)=>{for(var n in t)V.o(t,n)&&!V.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},V.f={},V.e=e=>Promise.all(Object.keys(V.f).reduce(((t,n)=>(V.f[n](e,t),t)),[])),V.u=e=>e+".bundle.js",V.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),V.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),V.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a={},s="terra:",V.l=(e,t,n,i)=>{if(a[e])a[e].push(t);else{var o,r;if(void 0!==n)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var c=l[d];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")==s+n){o=c;break}}o||(r=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,V.nc&&o.setAttribute("nonce",V.nc),o.setAttribute("data-webpack",s+n),o.src=e),a[e]=[t];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(u);var i=a[e];if(delete a[e],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((e=>e(n))),t)return t(n)},u=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),r&&document.head.appendChild(o)}},V.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},V.p="/",(()=>{var e={179:0};V.f.j=(t,n)=>{var i=V.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var o=new Promise(((n,o)=>i=e[t]=[n,o]));n.push(i[2]=o);var r=V.p+V.u(t),a=new Error;V.l(r,(n=>{if(V.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",a.name="ChunkLoadError",a.type=o,a.request=r,i[1](a)}}),"chunk-"+t,t)}},V.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,[r,a,s]=n,l=0;for(i in a)V.o(a,i)&&(V.m[i]=a[i]);if(s)var d=s(V);for(t&&t(n);l<r.length;l++)o=r[l],V.o(e,o)&&e[o]&&e[o][0](),e[r[l]]=0;return V.O(d)},n=self.webpackChunkterra=self.webpackChunkterra||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),z={},q={9479:function(){return{"./terra-wasm_bg.js":{__wbindgen_json_parse:function(e,t){return void 0===l&&(l=V.c[7247].exports),l.t$(e,t)},__wbindgen_json_serialize:function(e,t){return void 0===d&&(d=V.c[7247].exports),d.r1(e,t)},__wbindgen_object_drop_ref:function(e){return void 0===c&&(c=V.c[7247].exports),c.ug(e)},__wbindgen_string_new:function(e,t){return void 0===h&&(h=V.c[7247].exports),h.h4(e,t)},__wbg_new_59cb74e423758ede:function(){return void 0===u&&(u=V.c[7247].exports),u.h9()},__wbg_stack_558ba5917b466edd:function(e,t){return void 0===f&&(f=V.c[7247].exports),f.Dz(e,t)},__wbg_error_4bb6c2a97407129a:function(e,t){return void 0===v&&(v=V.c[7247].exports),v.kF(e,t)},__wbg_tile_new:function(e){return void 0===g&&(g=V.c[7247].exports),g.j$(e)},__wbg_debug_8cbacf3c2ac7dd30:function(e,t,n,i){return void 0===p&&(p=V.c[7247].exports),p.vI(e,t,n,i)},__wbg_error_9ff84d33a850b1ef:function(e){return void 0===b&&(b=V.c[7247].exports),b.Qw(e)},__wbg_error_3766ee0164348c32:function(e,t,n,i){return void 0===m&&(m=V.c[7247].exports),m.lQ(e,t,n,i)},__wbg_info_d8a33d4400a24fd8:function(e,t,n,i){return void 0===j&&(j=V.c[7247].exports),j.tZ(e,t,n,i)},__wbg_log_6ec27d0b9bf3cc32:function(e,t,n,i){return void 0===x&&(x=V.c[7247].exports),x.Ws(e,t,n,i)},__wbg_time_f95106dabafc2a66:function(e,t){return void 0===w&&(w=V.c[7247].exports),w.Iq(e,t)},__wbg_timeEnd_4cf2ddaad87faeb9:function(e,t){return void 0===y&&(y=V.c[7247].exports),y.KG(e,t)},__wbg_warn_e9faf5f3087bbb16:function(e,t,n,i){return void 0===_&&(_=V.c[7247].exports),_.ut(e,t,n,i)},__wbg_randomFillSync_d90848a552cbd666:function(e,t,n){return void 0===O&&(O=V.c[7247].exports),O.L7(e,t,n)},__wbg_getRandomValues_57e4008f45f0e105:function(e,t){return void 0===Z&&(Z=V.c[7247].exports),Z.E_(e,t)},__wbg_self_f865985e662246aa:function(){return void 0===S&&(S=V.c[7247].exports),S.MY()},__wbg_crypto_bfb05100db79193b:function(e){return void 0===k&&(k=V.c[7247].exports),k._y(e)},__wbg_msCrypto_f6dddc6ae048b7e2:function(e){return void 0===C&&(C=V.c[7247].exports),C.Yj(e)},__wbindgen_is_undefined:function(e){return void 0===E&&(E=V.c[7247].exports),E.XP(e)},__wbg_static_accessor_MODULE_39947eb3fe77895f:function(){return void 0===T&&(T=V.c[7247].exports),T.f$()},__wbg_require_c59851dfa0dc7e78:function(e,t,n){return void 0===P&&(P=V.c[7247].exports),P.sV(e,t,n)},__wbg_new_8528c110a833413f:function(){return void 0===F&&(F=V.c[7247].exports),F.Df()},__wbg_push_17a514d8ab666103:function(e,t){return void 0===H&&(H=V.c[7247].exports),H.R9(e,t)},__wbg_new_7031805939a80203:function(e,t){return void 0===R&&(R=V.c[7247].exports),R.SS(e,t)},__wbg_buffer_ebc6c8e75510eae3:function(e){return void 0===N&&(N=V.c[7247].exports),N.v3(e)},__wbg_length_317f0dd77f7a6673:function(e){return void 0===A&&(A=V.c[7247].exports),A.rX(e)},__wbg_new_135e963dedf67b22:function(e){return void 0===I&&(I=V.c[7247].exports),I.XV(e)},__wbg_set_4a5072a31008e0cb:function(e,t,n){return void 0===W&&(W=V.c[7247].exports),W.CV(e,t,n)},__wbg_newwithlength_78dc302d31527318:function(e){return void 0===M&&(M=V.c[7247].exports),M.wS(e)},__wbg_subarray_34c228a45c72d146:function(e,t,n){return void 0===B&&(B=V.c[7247].exports),B.R2(e,t,n)},__wbindgen_throw:function(e,t){return void 0===L&&(L=V.c[7247].exports),L.Or(e,t)},__wbindgen_rethrow:function(e){return void 0===D&&(D=V.c[7247].exports),D.nD(e)},__wbindgen_memory:function(){return void 0===X&&(X=V.c[7247].exports),X.oH()}}}}},U={936:[9479]},V.w={},V.f.wasm=function(e,t){(U[e]||[]).forEach((function(n,i){var o=z[n];if(o)t.push(o);else{var r,a=q[n](),s=fetch(V.p+""+{936:{9479:"829994349ae80a05ab14"}}[e][n]+".module.wasm");r=a instanceof Promise&&"function"==typeof WebAssembly.compileStreaming?Promise.all([WebAssembly.compileStreaming(s),a]).then((function(e){return WebAssembly.instantiate(e[0],e[1])})):"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(s,a):s.then((function(e){return e.arrayBuffer()})).then((function(e){return WebAssembly.instantiate(e,a)})),t.push(z[n]=r.then((function(e){return V.w[n]=(e.instance||e).exports})))}}))};var Y=V.O(void 0,[583,216],(()=>V(2629)));Y=V.O(Y)})();